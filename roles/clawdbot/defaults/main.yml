---
# Clawdbot default variables

# Tailscale settings
tailscale_authkey: ""  # Optional: set to auto-connect during installation

# Node.js version
nodejs_version: "22.x"

# Clawdbot settings
# Legacy port variable (use clawdbot_gateway_port for gateway)
clawdbot_port: 3000

# Gateway port (official default: 18789)
clawdbot_gateway_port: 18789

# Gateway authentication token (auto-generated if empty)
# Set this to a specific value for reproducibility across deployments
clawdbot_gateway_token: ""

# Force redeploy config (overwrites existing, backup is still created)
clawdbot_force_config: false

# Auto-start gateway daemon after installation
clawdbot_start_daemon: true

# Gateway and Reverse Proxy Settings
# Bind mode: "lan" (0.0.0.0), "loopback" (127.0.0.1), "tailnet" (Tailscale IP), "auto"
clawdbot_gateway_bind: "lan"

# Enable reverse proxy mode (trust X-Forwarded-* headers)
clawdbot_behind_proxy: true

# Trusted proxy IP addresses and networks
clawdbot_trusted_proxies:
  - "100.64.0.0/32"   # Tailscale proxy host
  - "192.168.1.0/24"   # Local network

# Networks allowed to access the gateway via UFW
clawdbot_allowed_networks:
  - { ip: "100.64.0.0/32", comment: "Tailscale proxy host" }
  - { ip: "192.168.1.0/24", comment: "Local network" }

# Clawdbot config directory
clawdbot_config_dir: "{{ clawdbot_home }}/.clawdbot"

# User settings (will be created as system user)
clawdbot_user: clawdbot
clawdbot_home: /home/clawdbot

# OS-specific settings (set dynamically in tasks)
homebrew_prefix: "{{ '/opt/homebrew' if ansible_os_family == 'Darwin' else '/home/linuxbrew/.linuxbrew' }}"
package_manager: "{{ 'brew' if ansible_os_family == 'Darwin' else 'apt' }}"

# PATH configuration for clawdbot user
# Full PATH including pnpm, local binaries, and Homebrew
clawdbot_path: "{{ clawdbot_home }}/.local/share/pnpm:{{ clawdbot_home }}/.local/bin:{{ homebrew_prefix }}/bin:/usr/local/bin:/usr/bin:/bin"
# PATH without pnpm (for tasks that don't need pnpm)
clawdbot_path_minimal: "{{ clawdbot_home }}/.local/bin:{{ homebrew_prefix }}/bin:/usr/local/bin:/usr/bin:/bin"
# PATH for macOS Homebrew-only (for system tools that need brew)
clawdbot_path_homebrew: "{{ homebrew_prefix }}/bin:{{ ansible_env.PATH | default('/usr/local/bin:/usr/bin:/bin') }}"

# Installation mode: 'release' or 'development'
# release: Install via pnpm install -g clawdbot@latest
# development: Clone repo, build from source, link globally
clawdbot_install_mode: "release"

# Development mode settings (only used when clawdbot_install_mode: development)
clawdbot_repo_url: "https://github.com/clawdbot/clawdbot.git"
clawdbot_repo_branch: "main"
clawdbot_code_dir: "{{ clawdbot_home }}/code"
clawdbot_repo_dir: "{{ clawdbot_code_dir }}/clawdbot"

# SSH keys for clawdbot user
# Add your public SSH keys here to allow SSH access as clawdbot user
# Example:
#   clawdbot_ssh_keys:
#     - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx user@host"
#     - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDxxxxxxxxxxxxxxxxxxxxxxx user@host"
clawdbot_ssh_keys: []
